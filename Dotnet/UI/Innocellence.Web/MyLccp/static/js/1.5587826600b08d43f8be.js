webpackJsonp([1],{"4thB":function(t,a,s){t.exports=s.p+"static/img/noSummary.ef2e036.png"},"8P3H":function(t,a){},"8RPF":function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("4YfN"),n=s.n(e),r=s("SJI6"),o=s("pWO4"),c=s("wsH0"),i=s.n(c),l=s("9MEh"),u=s("oMbb"),p={name:"SugarControl",props:["IsReport"],components:{Loading:l.a,Modal:u.a},data:function(){return{showLoading:!1,showPop:!1,cardBg:i.a,timeRanges:["空腹","早餐后","午餐前","午餐后","晚餐前","晚餐后","睡前"]}},computed:n()({},Object(r.mapGetters)({passRate:"passRate",sugarControl:"sugarControl",PatientAgeGenderSummary:"PatientAgeGenderSummary",Last7DayNewPatientAmount:"Last7DayNewPatientAmount",TotalPatientAmount:"TotalPatientAmount"})),methods:{setPersonRatio:function(){var t=this.PatientAgeGenderSummary.rates,a=this.PatientAgeGenderSummary.maleData,s={tooltip:{show:!1},grid:{height:"90%",top:"10%",left:"20%"},legend:{data:["女","男"],top:"5%",selectedMode:!1,right:"3%",icon:"stack"},xAxis:{show:!1},yAxis:{type:"category",zlevel:1,axisTick:{show:!1},axisLine:{lineStyle:{color:"#D3CBCA"}},axisLabel:{textStyle:{color:"#000"}},data:[">69岁","60-69岁","50-59岁","40-49岁","30-39岁","<30岁"]},series:[{name:"女",type:"bar",barGap:"50%",barWidth:"13px",barCategoryGap:"50%",stack:"总量",itemStyle:{color:"#D3CBCA"},data:this.PatientAgeGenderSummary.femaleData},{name:"男",type:"bar",barWidth:"13px",stack:"总量",data:a,itemStyle:{color:"#A59A93"},label:{normal:{position:"right",show:!0,color:"#000000",formatter:function(a){return t[a.dataIndex]+"%"}}}}]};echarts.init(document.getElementById("personRatio")).setOption(s)},togglePop:function(){this.$store.dispatch("pageClickTracking",{logType:"click",message:"introduction"}),this.showPop=!this.showPop}},watch:{sugarControl:function(t,a){void 0!==t.TotalPatientAmount&&(this.showLoading=!1)},PatientAgeGenderSummary:function(t,a){this.setPersonRatio()}},beforeMount:function(){void 0===this.sugarControl.TotalPatientAmount&&(this.showLoading=!0,this.$store.dispatch("fetchSugarControl")),this.PatientAgeGenderSummary.rates[0]||this.$store.dispatch("fetchPatientSum")}},d={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"page-sugar"},[s("section",{staticClass:"pass count-card"},[s("div",{staticClass:"card-top",style:{backgroundImage:"url("+t.cardBg+")"}},[s("p",{staticClass:"card-intro clearfix"},[s("span",[t._v("7天血糖值达标比例")]),t._v("(总计"+t._s(t.sugarControl.GoodControlTotalAmount7Day)+"次测量)\n        ")]),t._v(" "),s("p",{staticClass:"count-percent clearfix"},[s("span",[t._v(t._s(Math.round(t.sugarControl.GoodControlRate7Day))),s("i",{staticClass:"percent-icon"},[t._v("%")])]),t._v(" "),s("span")])]),t._v(" "),s("ul",{staticClass:"card-content"},t._l(t.passRate,function(a,e){return s("li",{key:e,staticClass:"content-row"},[s("span",{staticClass:"time"},[t._v(t._s(t.timeRanges[e]))]),t._v(" "),s("p",{staticClass:"percent"},[s("span",{staticClass:"percent-line",style:{width:.7*a+"%"}},[s("i")]),t._v(" "),s("span",{staticClass:"percent-text"},[t._v(t._s(a+"%"))])])])}))]),t._v(" "),s("section",{staticClass:"count-card no-content"},[s("div",{staticClass:"card-top",style:{backgroundImage:"url("+t.cardBg+")"}},[s("p",{staticClass:"card-intro clearfix"},[s("span",[t._v("7天测量≥3次的新入组患者比例")]),t._v(" "),s("span",{staticClass:"explain",on:{click:t.togglePop}},[t._v("说明 "),s("icon",{attrs:{name:"question-circle-o"}})],1)]),t._v(" "),s("div",{staticClass:"count-percent clearfix"},[s("span",[t._v(t._s(Math.round(t.sugarControl.NewPatientTestRate7Day))),s("i",{staticClass:"percent-icon"},[t._v("%")])]),t._v(" "),s("span")])])]),t._v(" "),s("section",{staticClass:"count-card patient-count"},[s("div",{staticClass:"card-top clearfix",style:{backgroundImage:"url("+t.cardBg+")"}},[s("div",{staticClass:"top-num"},[t._v("\n        "+t._s(t.TotalPatientAmount)+"\n      ")]),t._v(" "),s("div",{staticClass:"top-right"},[s("p",[t._v("名患者\n          ")]),t._v(" "),s("p",[t._v("近7天新增"+t._s(t.Last7DayNewPatientAmount)+"名患者")])])]),t._v(" "),t._m(0)]),t._v(" "),s("Modal",{attrs:{title:"说明",showPop:t.showPop,close:t.togglePop,autoHeight:!0}},[s("div",[s("div",{staticClass:"rule"},[s("p",{staticClass:"tag-row"},[t._v("\n          新入组患者:12周内入组的患者\n        ")])])])]),t._v(" "),s("Loading",{attrs:{showLoading:t.showLoading}})],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"card-content"},[a("div",{staticClass:"chart-wrp"},[a("div",{attrs:{id:"personRatio"}})])])}]};var h=s("vSla")(p,d,!1,function(t){s("Muo4")},"data-v-39ab19d9",null).exports,m={name:"SugarControl",props:["IsReport"],components:{Loading:l.a,Modal:u.a},data:function(){return{showLoading:!1,showPop:!1,cardBg:i.a,timeRanges:["空腹","早餐后","午餐前","午餐后","晚餐前","晚餐后","睡前"],currentHcpId:"",currentHcpName:""}},computed:n()({},Object(r.mapGetters)({user:"user",passRate:"passRate",sugarControl:"sugarControl",hcpControl:"hcpControl",hcpPassRate:"hcpPassRate",PatientAgeGenderSummary:"PatientAgeGenderSummary",Last7DayNewPatientAmount:"Last7DayNewPatientAmount",TotalPatientAmount:"TotalPatientAmount",departPatientAgeGenderSummary:"departPatientAgeGenderSummary",departLast7DayNewPatientAmount:"departLast7DayNewPatientAmount",departTotalPatientAmount:"departTotalPatientAmount"})),methods:{selectHcp:function(t){this.currentHcpId===t.Item1?(this.currentHcpId="",this.currentHcpName=""):(this.currentHcpId=t.Item1,this.currentHcpName="我"===t.Item2?t.Item3:t.Item2,this.showLoading=!0,this.$store.dispatch("fetchHcpControl",t.Item1))},chooseNoHcp:function(){this.currentHcpId=""},setPersonRatio:function(){var t=this.currentHcpId?this.PatientAgeGenderSummary:this.departPatientAgeGenderSummary,a=t.rates,s=t.maleData,e={tooltip:{show:!1},grid:{height:"90%",top:"10%",left:"20%"},legend:{data:["女","男"],top:"5%",right:"3%",selectedMode:!1,icon:"stack"},xAxis:{show:!1},yAxis:{type:"category",zlevel:1,axisTick:{show:!1},axisLine:{lineStyle:{color:"#D3CBCA"}},axisLabel:{textStyle:{color:"#000"}},data:[">69岁","60-69岁","50-59岁","40-49岁","30-39岁","<30岁"]},series:[{name:"女",type:"bar",barGap:"10%",barWidth:"13px",barCategoryGap:"50%",stack:"总量",itemStyle:{color:"#D3CBCA"},data:t.femaleData},{name:"男",type:"bar",barWidth:"13px",stack:"总量",data:s,itemStyle:{color:"#A59A93"},label:{normal:{position:"right",show:!0,color:"#000000",formatter:function(t){return a[t.dataIndex]+"%"}}}}]};echarts.init(document.getElementById("personRatio")).setOption(e)},togglePop:function(){this.$store.dispatch("pageClickTracking",{logType:"click",message:"introduction"}),this.showPop=!this.showPop}},watch:{sugarControl:function(t,a){void 0!==t.TotalPatientAmount&&(this.showLoading=!1)},hcpControl:function(t,a){this.showLoading=!1,this.setPersonRatio()},currentHcpId:function(t,a){t||this.setPersonRatio()},departPatientAgeGenderSummary:function(t,a){this.setPersonRatio()}},beforeMount:function(){"srSummary"===this.$route.name?(this.showLoading=!0,this.$store.dispatch("fetchSrControl",this.$route.params.hospitalId)):(void 0===this.sugarControl.TotalPatientAmount&&(this.showLoading=!0,this.$store.dispatch("fetchSugarControl",this.user.DctrId)),this.departPatientAgeGenderSummary.rates[0]||this.$store.dispatch("fetchDepartPatientSum"))},mounted:function(){this.departPatientAgeGenderSummary&&this.setPersonRatio()}},v={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"page-sugar"},["srSummary"!==t.$route.name?s("section",{staticClass:"page-top"},[s("div",{staticClass:"top-left"},[s("span",{style:{backgroundColor:t.currentHcpId?"#9b9b9b":""},on:{click:t.chooseNoHcp}},[t._v("科室平均")])]),t._v(" "),s("div",{staticClass:"depart-doctors"},[s("ul",{staticClass:"clearfix doctors",style:{width:t.sugarControl.DepartDctrs&&t.sugarControl.DepartDctrs.length?5.6*t.sugarControl.DepartDctrs.length+"em":""}},t._l(t.sugarControl.DepartDctrs,function(a,e){return s("li",{key:e,staticClass:"doctor-item"},[s("span",{class:t.currentHcpId===a[0].Item1?"doctor-active":"",on:{click:function(s){t.selectHcp(a[0])}}},[t._v("\n            "+t._s(a[0].Item2.length>4?a[0].Item2.slice(0,3)+"...":a[0].Item2)+"\n          ")]),t._v(" "),s("br"),t._v(" "),s("span",{class:a[1]&&t.currentHcpId===a[1].Item1?"doctor-active":"",on:{click:function(s){a[1]&&t.selectHcp(a[1])}}},[t._v("\n            "+t._s(a[1]?a[1].Item2.length>4?a[1].Item2.slice(0,4)+"...":a[1].Item2:"")+"\n          ")])])}))])]):t._e(),t._v(" "),t.currentHcpId?t._e():s("section",{staticClass:"pass count-card"},[s("div",{staticClass:"card-top",style:{backgroundImage:"url("+t.cardBg+")"}},[s("p",{staticClass:"card-intro clearfix"},[s("span",[t._v("7天血糖值达标比例")]),t._v("  (总计"+t._s(t.sugarControl.GoodControlTotalAmount7Day)+"次测量)\n        ")]),t._v(" "),s("p",{staticClass:"count-percent clearfix"},[s("span",[t._v(t._s(Math.round(t.sugarControl.GoodControlRate7Day))),s("i",{staticClass:"percent-icon"},[t._v("%")])]),t._v(" "),s("span")])]),t._v(" "),s("ul",{staticClass:"card-content"},t._l(t.passRate,function(a,e){return s("li",{key:e,staticClass:"content-row"},[s("span",{staticClass:"time"},[t._v(t._s(t.timeRanges[e]))]),t._v(" "),s("p",{staticClass:"percent"},[s("span",{staticClass:"percent-line",style:{width:.7*a+"%"}},[s("i")]),t._v(" "),s("span",{staticClass:"percent-text"},[t._v(t._s(a+"%"))])])])}))]),t._v(" "),t.currentHcpId?t._e():s("section",{staticClass:"count-card no-content"},[s("div",{staticClass:"card-top",style:{backgroundImage:"url("+t.cardBg+")"}},[s("p",{staticClass:"card-intro clearfix"},[s("span",[t._v("7天测量≥3次的新入组患者比例")]),t._v(" "),s("span",{staticClass:"explain",on:{click:t.togglePop}},[t._v("说明 "),s("icon",{attrs:{name:"question-circle-o"}})],1)]),t._v(" "),s("div",{staticClass:"count-percent clearfix"},[s("span",[t._v(t._s(Math.round(t.sugarControl.NewPatientTestRate7Day))),s("i",{staticClass:"percent-icon"},[t._v("%")])]),t._v(" "),s("span")])])]),t._v(" "),t.currentHcpId?s("section",{staticClass:"pass compare-card count-card"},[s("div",{staticClass:"card-top",style:{backgroundImage:"url("+t.cardBg+")"}},[t._m(0),t._v(" "),s("div",{staticClass:"card-top-wrp"},[s("div",{staticClass:"card-inner"},[s("p",{staticClass:"count-percent clearfix"},[s("span",[t._v("\n              "+t._s(Math.round(t.sugarControl.GoodControlRate7Day))),s("i",{staticClass:"percent-icon"},[t._v("%")])]),t._v(" "),s("br"),t._v(" "),s("span",[t._v("总计"+t._s(t.sugarControl.GoodControlTotalAmount7Day)+"次测量")])])]),t._v(" "),s("div",{staticClass:"card-inner"},[s("p",{staticClass:"count-percent clearfix"},[s("span",[t._v("\n              "+t._s(t.hcpControl.GoodControlRate7Day?Math.round(t.hcpControl.GoodControlRate7Day):"--")),s("i",{staticClass:"percent-icon"},[t._v("%")])]),t._v(" "),s("br"),t._v(" "),s("span",[t._v("总计"+t._s(t.hcpControl.GoodControlTotalAmount7Day)+"次测量")])])])])]),t._v(" "),s("ul",{staticClass:"card-content"},t._l(t.passRate,function(a,e){return s("li",{key:e,staticClass:"content-row"},[s("span",{staticClass:"time"},[t._v(t._s(t.timeRanges[e]))]),t._v(" "),s("div",{staticClass:"compare-percent"},[s("p",{staticClass:"percent"},[s("span",{staticClass:"percent-line",style:{width:.7*a+"%"}}),t._v(" "),s("span",{staticClass:"percent-text"},[t._v(t._s(a+"%"))])]),t._v(" "),s("p",{staticClass:"percent"},[s("span",{staticClass:"percent-line",style:{width:.7*t.hcpPassRate[e]+"%"}},[s("i")]),t._v(" "),s("span",{staticClass:"percent-text"},[t._v(t._s(t.hcpPassRate[e]+"%"))])])])])}))]):t._e(),t._v(" "),t.currentHcpId?s("section",{staticClass:"compare-card count-card no-content"},[s("div",{staticClass:"card-top",style:{backgroundImage:"url("+t.cardBg+")"}},[t._m(1),t._v(" "),s("div",{staticClass:"card-top-wrp"},[s("div",{staticClass:"card-inner"},[s("p",{staticClass:"count-percent clearfix"},[s("span",[t._v(t._s(Math.round(t.sugarControl.NewPatientTestRate7Day))),s("i",{staticClass:"percent-icon"},[t._v("%")])]),t._v(" "),s("span")])]),t._v(" "),s("div",{staticClass:"card-inner"},[s("p",{staticClass:"count-percent clearfix"},[s("span",[t._v("\n              "+t._s(t.hcpControl.NewPatientTestRate7Day?Math.round(t.hcpControl.NewPatientTestRate7Day):"--")+"\n              "),s("i",{staticClass:"percent-icon"},[t._v("%")])]),t._v(" "),s("span")])])])])]):t._e(),t._v(" "),s("section",{staticClass:"count-card patient-count"},[s("div",{staticClass:"card-top clearfix",style:{backgroundImage:"url("+t.cardBg+")"}},[s("div",{staticClass:"top-num"},[t._v("\n        "+t._s(t.currentHcpId?t.TotalPatientAmount:t.departTotalPatientAmount)+"\n      ")]),t._v(" "),s("div",{staticClass:"top-right"},[s("p",[t._v("名患者\n          "),t.currentHcpName?s("i",[t._v("(来自 "+t._s(t.currentHcpName)+" 医生)")]):t._e()]),t._v(" "),s("p",[t._v("近7天新增"+t._s(t.currentHcpId?t.Last7DayNewPatientAmount:t.departLast7DayNewPatientAmount)+"名患者")])])]),t._v(" "),t._m(2)]),t._v(" "),s("Modal",{attrs:{title:"说明",showPop:t.showPop,close:t.togglePop,autoHeight:!0}},[s("div",[s("div",{staticClass:"rule"},[s("p",{staticClass:"tag-row"},[t._v("\n          新入组患者:12周内入组的患者\n        ")])])])]),t._v(" "),s("Loading",{attrs:{showLoading:t.showLoading}})],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("p",{staticClass:"compare-intro clearfix"},[a("span",{staticClass:"card-title"},[this._v("7天血糖达标比例")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",{staticClass:"card-intro clearfix"},[a("span",[this._v("7天测量≥3次的新入组患者比例")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"card-content"},[a("div",{staticClass:"chart-wrp"},[a("div",{attrs:{id:"personRatio"}})])])}]};var _=s("vSla")(m,v,!1,function(t){s("UDIu")},"data-v-5f0691d6",null).exports,g={name:"Doctors",props:["role"],components:{Loading:l.a},data:function(){return{sortDoctors:[],currentRange:0,showLoading:!1,currentSort:"desc",currentFilter:"BGCount",dates:[{text:"近7天",dateRange:0},{text:"近28天",dateRange:1},{text:"近12周",dateRange:2}]}},computed:n()({},Object(r.mapGetters)({doctors:"doctors",sendStatus:"sendStatus",user:"user"})),methods:{sortList:function(t,a){var s="desc"===this.currentSort?a[this.currentFilter]-t[this.currentFilter]:t[this.currentFilter]-a[this.currentFilter];return 0!==s?s:t.DoctorName.localeCompare(a.DoctorName,"zh-CN")},changeFilter:function(t){t===this.currentFilter?this.currentSort="asc"===this.currentSort?"desc":"asc":this.currentSort="desc",this.currentFilter=t,this.sortDoctors=this.doctors.sort(this.sortList)},fetchDoctorList:function(t){this.$store.dispatch("fetchDoctorList",t),this.currentRange=t,this.sortDoctors=this.doctors.sort(this.sortList)},goToList:function(t){t.HcpId!==this.user.HcpId?(this.$store.dispatch("departWatchDoctor",t),this.$router.push("/depart-patient-list/"+t.HcpId)):this.$router.push("/patient-list/default")}},watch:{sendStatus:function(t,a){t||(this.currentSort="desc",this.currentFilter="BGCount")}},beforeMount:function(){this.doctors.length||this.fetchDoctorList(0)}},C={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"page-doctors"},[s("div",{staticClass:"doctor-list"},[s("ul",{staticClass:"list-header"},t._l(t.dates,function(a,e){return s("li",{key:e,class:t.currentRange===a.dateRange?"filter-active":"",on:{click:function(s){t.fetchDoctorList(a.dateRange)}}},[t._v(t._s(a.text))])})),t._v(" "),s("ul",{staticClass:"list-wrp"},[s("li",{staticClass:"list-sort list-row"},[s("ul",[s("li",[t._v("医生名")]),t._v(" "),s("li",{class:"Sum"===t.currentFilter?"filter-active":"",on:{click:function(a){t.changeFilter("Sum")}}},[t._v("\n            患者总数\n            "),s("span",{staticClass:"sort-icon-asc",class:"asc"===t.currentSort?"icon-active":""},[s("icon",{attrs:{name:"sort-asc",scale:"0.7"}})],1),t._v(" "),s("span",{staticClass:"sort-icon-desc",class:"desc"===t.currentSort?"icon-active":""},[s("icon",{attrs:{name:"sort-desc",scale:"0.7"}})],1)]),t._v(" "),s("li",{staticClass:"mini-line",class:"BGCount"===t.currentFilter?"filter-active":"",on:{click:function(a){t.changeFilter("BGCount")}}},[t._v("\n            测量≥3次"),s("br"),t._v("患者数\n            "),s("span",{staticClass:"sort-icon-asc",class:"asc"===t.currentSort?"icon-active":""},[s("icon",{attrs:{name:"sort-asc",scale:"0.7"}})],1),t._v(" "),s("span",{staticClass:"sort-icon-desc",class:"desc"===t.currentSort?"icon-active":""},[s("icon",{attrs:{name:"sort-desc",scale:"0.7"}})],1)])])]),t._v(" "),t._l(t.sortDoctors.length?t.sortDoctors:t.doctors,function(a){return s("li",{key:a.id,staticClass:"list-row",on:{click:function(s){t.goToList(a)}}},[s("ul",[s("li",[t._v(t._s(a.DoctorName))]),t._v(" "),s("li",[t._v(t._s(a.Sum))]),t._v(" "),s("li",[t._v("\n            "+t._s(a.BGCount)+"\n            "),s("span",{staticClass:"link-icon"},[s("icon",{attrs:{name:"angle-right",scale:"1.5"}})],1)])])])})],2)]),t._v(" "),s("Loading",{attrs:{showLoading:t.sendStatus}})],1)},staticRenderFns:[]};var f=s("vSla")(g,C,!1,function(t){s("8P3H")},"data-v-495886ad",null).exports,y={name:"Summary",components:{Footer:o.a,SugarControl:h,DepartControl:_,Doctors:f},data:function(){return{currentTab:"",tabs:[]}},computed:n()({},Object(r.mapGetters)({user:"user",sugarControl:"sugarControl"})),methods:{changeTab:function(t){this.currentTab=t,this.$router.push("/summary/"+t)}},beforeMount:function(){"srSummary"===this.$route.name?(this.tabs=[{name:"DepartControl",text:"科室糖控"}],this.currentTab="DepartControl"):(this.user.IsReport?(this.tabs=[{name:"DepartControl",text:"科室糖控"},{name:"Doctors",text:"医生详情"}],this.currentTab="DepartControl"):(this.tabs=[{name:"SugarControl",text:"控糖情况"}],this.currentTab="SugarControl"),"Doctors"===this.$route.params.tab&&this.changeTab("Doctors"))}},P={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-sum"},["Doctors"===t.currentTab||"SugarControl"!==t.currentTab&&"srSummary"!==t.$route.name&&t.sugarControl.TotalPatientAmount?e("div",{staticClass:"nav-tab"},[e("ul",{staticClass:"tab-wrp"},t._l(t.tabs,function(a,s){return e("li",{key:s,class:t.currentTab===a.name?"tab-active":"",on:{click:function(s){t.changeTab(a.name)}}},[e("span",[t._v(t._s(a.text))])])}))]):t._e(),t._v(" "),0===t.sugarControl.TotalPatientAmount?e("img",{staticClass:"noSummary",attrs:{src:s("4thB"),alt:""}}):t._e(),t._v(" "),0!==t.sugarControl.TotalPatientAmount?e(t.currentTab,{tag:"component",attrs:{"keep-alive":""}}):t._e(),t._v(" "),e("Footer")],1)},staticRenderFns:[]};var w=s("vSla")(y,P,!1,function(t){s("ZaYs")},"data-v-46866f1a",null);a.default=w.exports},Muo4:function(t,a){},UDIu:function(t,a){},ZaYs:function(t,a){},wsH0:function(t,a,s){t.exports=s.p+"static/img/card_top_bg.1190a8b.png"}});
//# sourceMappingURL=1.5587826600b08d43f8be.js.map